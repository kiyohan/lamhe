<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
</head>

<body>
    <div class="bar">
        <nav>
            <input type="checkbox" id="check">
            <label for="check" class="checkbtn">
                <i class="fas fa-bars"></i>
            </label>
            <label class="logo">Lamhe</label>
            <ul>
                <li><a href="#" class="active">Upload images</a> </li>
                <li><a href="video.html">Create a Video</a> </li>

            </ul>
        </nav>

        <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    </div>
    <main class="app">
        <div class="header">
            <h2>Upload Image</h2>
        </div>
        <div class="input-div">
            <p>Drag & Drop images here or<span class="browse">Browse</span></p>
            <input type="file" class="file" multiple="multiple" accept="image/png,image/jpeg,img/jpg">
        </div>
        <div class="queued-div" onclick="selectImage(event)"></div>
        <div class="selected-images">
            <h3>Selected Images</h3>
            <div class="selected-images-div"></div>
            <br>
            <button onclick="clearSelectedImages()">Clear Selected Images</button>
        
        </div>
    </main>
   
    <script>
        const queuedImagesArray = [];
    const selectedImagesArray = [];
    const queuedDiv = document.querySelector(".queued-div");
    const input = document.querySelector(".input-div input");
    const selectedImagesDiv = document.querySelector(".selected-images-div");

    input.addEventListener("change", handleFileSelection);
    inputDiv.addEventListener("drop", handleFileDrop);

    function handleFileSelection() {
        const files = input.files;
        for (let i = 0; i < files.length; i++) {
            queuedImagesArray.push(files[i]);
        }
        displayQueuedImages();
    }

    function handleFileDrop(e) {
        e.preventDefault();
        const files = e.dataTransfer.files;
        for (let i = 0; i < files.length; i++) {
            if (files[i].type.includes("image")) {
                queuedImagesArray.push(files[i]);
            }
        }
        displayQueuedImages();
    }

    function displayQueuedImages() {
        let images = "";
        queuedImagesArray.forEach((image, index) => {
            images += `<div class="image" data-index="${index}">
                <span class="index"  >${index + 1}</span>
                <img src="${URL.createObjectURL(image)}" alt="image"> 
            </div>`;
        });
        queuedDiv.innerHTML = images;
    }

    function selectImage(event) {
        const clickedImage = event.target.closest('.image');
        if (clickedImage) {
            const index = clickedImage.getAttribute('data-index');
            const selectedImage = queuedImagesArray[index];
            selectedImagesArray.push(selectedImage); 
            displaySelectedImages();
            displayQueuedImages();
        }
    }

    function displaySelectedImages() {
        let images = "";
        selectedImagesArray.forEach((image, index) => {
            images += `<div class="image" data-index="${index}">
                <span class="index">${index + 1}</span>
                <img src="${URL.createObjectURL(image)}" alt="image">
                <span class="delete-icon"  onclick="deleteSelectedImage(${index})">&times;</span>
            </div>`;
        });
        selectedImagesDiv.innerHTML = images;
    }

    function deleteSelectedImage(index) {
        selectedImagesArray.splice(index, 1);
        displaySelectedImages();
        displayQueuedImages();
    }

    function clearSelectedImages() {
        selectedImagesArray.length = 0;
        displaySelectedImages();
        displayQueuedImages();
    }
    </script>

</body>

</html>